<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="mapper.FoodMapper" >
  
  <resultMap id="BaseResultMap" type="empty.Food" >
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="sty_id" property="styId" jdbcType="INTEGER" />
    <result column="foodName" property="foodname" jdbcType="VARCHAR" />
    <result column="foodPrice" property="foodprice" jdbcType="DOUBLE" />
    <result column="foodVprice" property="foodvprice" jdbcType="DOUBLE" />
    <result column="foodRemark" property="foodremark" jdbcType="VARCHAR" />
    <result column="foodImage" property="foodimage" jdbcType="VARCHAR" />
  </resultMap>
  
  <!-- 关联菜系，名称的结果集映射 -->
  <resultMap id="findFoodAndStyleName" type="empty.FoodCustom"  extends="BaseResultMap">
  	<result column="styleName" property="stylename" jdbcType="VARCHAR"/>
  </resultMap>
  
  
  <!-- 通过关键字分页查询,查询总数据集  
  <select id="selectPageList" parameterType="cn.zjc.ssm.empty.Page" resultMap="findFoodAndStyleName">
  		
  		SELECT food.id,food.foodName,food.foodPrice,food.foodVprice,food.foodRemark,food.foodImage,style.styleName 
  		FROM food,style WHERE food.sty_id= style.id
  		and foodName like #{keyWord} limit #{start},#{rows}
  </select>
  -->
  <!-- 通过关键字查询返回总记录数 
  <select id="selectPageCount" parameterType="cn.zjc.ssm.empty.Page" resultType="Integer">
  		select count(1) from food where foodName like #{keyWord}
  </select>
  -->
  
  <!-- 通过多条件查询，返回总记录数 -->
  <select id="selectPageListUseDyc" parameterType="empty.Page" resultMap="findFoodAndStyleName">
  		SELECT f.id,f.foodName,f.foodPrice,f.foodVprice,f.foodRemark,f.foodImage,s.styleName 
  		FROM food f,style s
  			<where>
  				<if test="true">and f.sty_id= s.id</if>
				<if test="paramEntity.foodname!=null"> and f.foodName like #{paramEntity.foodname}</if>
				<if test="paramEntity.stylename!=null"> and s.styleName like #{paramEntity.stylename}</if> 
  			</where>
		limit #{start},#{rows}
  </select>
  
   <!-- 通过多条件关键字查询返回总记录数 -->
  <select id="selectPageCountUseDyc" parameterType="empty.Page" resultType="Integer">
  		select count(1) from food f,style s
  		<where>
  			<if test="true">and f.sty_id= s.id</if>
			<if test="paramEntity.foodname!=null"> and f.foodName like #{paramEntity.foodname}</if>
			<if test="paramEntity.stylename!=null"> and s.styleName like #{paramEntity.stylename}</if>
  		</where>
  </select>
  
  <!-- 通过主键批量删除菜单 -->
  <delete id="deleteList">
  		delete from food where id in
  		<foreach collection="array" open="(" close=")" separator="," item="pk">
  			#{pk}
  		</foreach>
  </delete>
  
  
  <!-- 新增功能-->
  <insert id="insert" parameterType="empty.Food" >
  	insert into food (id,sty_id,foodName,foodPrice,foodVprice,foodRemark,foodImage) 
  	values(#{id},#{styId},#{foodname},#{foodprice},#{foodvprice},#{foodremark},#{foodimage})
  </insert>
  
  <!-- 修改功能-->
  <update id="update" parameterType="empty.Food" >
  	update  food set
  	sty_id=#{styId},foodName=#{foodname},foodPrice=#{foodprice},foodVprice=#{foodvprice},foodRemark=#{foodremark},foodImage=#{foodimage}
  	where id=#{id}
  </update>
  
  
</mapper>